#include <std/core.pat>

struct UnknownChunk {
  u32 chunk_id;
  u32 chunk_size;
  u8 chunk_data[chunk_size];
};

struct Chunk0 {
 u32 chunk_size = std::mem::read_unsigned($, 4);
 u8 data[chunk_size];
};

enum FFNAType : u8 {
  Type0,
  Type1,
  Model,
  Map,
  Type4,
  Type5,
  Type6,
  Type7
};

struct ATTXDXT3_File {
 char format_sig1[4];
 char format_sig2[4];
 u16 texture_width;
 u16 texture_height;
 Chunk0 chunks[9];
 char ffna_signature[4];
 FFNAType ffna_type;
 UnknownChunk chunks1[while($ < sizeof($)-4)];
 u32 some_sig;
 };
 
 ATTXDXT3_File file @ 0;